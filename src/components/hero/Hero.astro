---
import { Timer } from './Timer'

import CalendarLogo from '../../assets/icons/Calendar.astro'

import Logo from './Logo.astro'
import RegisterButton from './RegisterButton.astro'

const targetDate = new Date('2024-11-16T08:30:00-04:00')

const getRemainingTime = () => {
  const currentDate = Date.now()
  return targetDate.getTime() - currentDate
}

const hasSessionCookie = Astro.cookies.has('__session')
---

<hero>
  <section
    class='pt-32 lg:pt-40 mb-12 flex flex-col items-center space-y-4 md:space-y-6'
  >
    <Logo class='w-auto sm:h-24' />
    <h2 class='text-center font-medium text-2xl md:text-4xl'>Sucre 2024</h2>

    {
      hasSessionCookie ? (
        <a
          href='/registro'
          class='w-fit py-2 lg:py-3 px-8 rounded-full text-xl md:text-3xl text-center border-2 bg-gray dark:bg-black hover:bg-yellow dark:hover:bg-blue transition-all'
        >
          Ver entrada
        </a>
      ) : (
        <RegisterButton />
      )
    }

    <div class='text-xl md:text-2xl font-medium leading-8 md:leading-10 pt-4'>
      <div class='flex items-start'>
        <CalendarLogo class='m-2' />
        <div>
          <span class='block'>SÃ¡bado 16 de noviembre</span>
          <span class='block'>08:30 hrs.</span>
        </div>
      </div>
    </div>

    <div>
      <Timer
        initialTime={getRemainingTime()}
        targetDate={targetDate}
        client:load
      />
    </div>
  </section>
</hero>
